{"version":3,"sources":["variables.js","index.js"],"names":["topLevelFrameBlocks","UIStrings","invoiceString","phoneString","buttonString","routeString","weightString","placesString","statusString","requestString","yesString","noString","returnString","redirectString","topLevelStrings","headerString","footerString","resultString","url","requestOptions","contentType","mode","cache","redirect","method","dataType","DOMFrameBlocks","renderSemanticBlock","block","renderHeader","innerHTML","renderFooter","length","getTrackingData","event","preventDefault","requests","Array","from","document","querySelectorAll","requestDocuments","forEach","prepareDocument","requestItem","push","DocumentNumber","querySelector","value","Phone","requestTemplate","modelName","calledMethod","methodProperties","Language","Documents","body","JSON","stringify","fetch","then","response","json","result","renderResult","data","resultData","trackingResultFields","item","index","CitySender","CityRecipient","DocumentWeight","SeatsAmount","Status","PossibilityCreateReturn","PossibilityCreateRedirecting","renderMain","renderRequestSet","renderStaticBlocks","renderDynamicBlocks","addRequestSet","target","parentNode","insertAdjacentHTML","removeRequestSet","remove","window","topLevelFrameString","reduce","renderString","renderApp"],"mappings":"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","file":"framework_task.a8842f6e.js","sourceRoot":"..","sourcesContent":["export const topLevelFrameBlocks = ['header', 'main', 'footer'];\n\nexport const UIStrings = {\n  invoiceString: 'Введите номер квитанции',\n  phoneString: 'Введите номер телефона',\n  buttonString: 'Искать',\n  routeString: 'Маршрут',\n  weightString: 'Вес, кг',\n  placesString: 'Мест',\n  statusString: 'Текущий статус',\n  requestString: 'Заказать',\n  yesString: 'да',\n  noString: 'нет',\n  returnString: 'Можно вернуть',\n  redirectString: 'Можно переслать',\n};\n\nexport const topLevelStrings = {\n  headerString: 'Трекинг посылок Новой почты',\n  footerString: 'Версия 1.0',\n  resultString: 'Результат',\n};\n\n// export const apiKey = '797cc99d2a4af108e6d6770516130d77';\nexport const url = 'https://api.novaposhta.ua/v2.0/json/';\n\nexport const requestOptions = {\n  contentType: 'application/json',\n  mode: 'cors',\n  cache: 'no-cache',\n  redirect: 'follow',\n  method: 'POST',\n  dataType: 'jsonp',\n};\n","import {\n  topLevelFrameBlocks,\n  UIStrings,\n  topLevelStrings,\n  requestOptions,\n  // apiKey,\n  url,\n} from './variables.js';\n\nconst DOMFrameBlocks = [];\n\nfunction renderSemanticBlock(block) {\n  return `<${block}></${block}>`;\n}\n\nfunction renderHeader() {\n  DOMFrameBlocks[0].innerHTML = `<h1>${topLevelStrings.headerString}</h1>`;\n}\n\nfunction renderFooter() {\n  DOMFrameBlocks[DOMFrameBlocks.length - 1].innerHTML = `${topLevelStrings.footerString}`;\n}\n\nfunction getTrackingData(event) {\n  event.preventDefault();\n  const requests = Array.from(document.querySelectorAll('.request_set'));\n  const requestDocuments = [];\n  requests.forEach(prepareDocument);\n\n  function prepareDocument(requestItem) {\n    requestDocuments.push({\n      DocumentNumber: requestItem.querySelector('input[name = invoice_number]').value,\n      Phone: requestItem.querySelector('input[name = phone_number]').value,\n    });\n  }\n\n  const requestTemplate = {\n    modelName: 'TrackingDocument',\n    calledMethod: 'getStatusDocuments',\n    methodProperties: {\n      Language: 'RU',\n    },\n  };\n  requestTemplate.methodProperties.Documents = requestDocuments;\n  requestOptions.body = JSON.stringify(requestTemplate);\n\n  fetch(url, requestOptions)\n    .then(response => {\n      return response.json();\n    })\n    .then(result => {\n      renderResult(result.data);\n    });\n}\n\nfunction renderResult(resultData) {\n  const trackingResultFields = Array.from(document.querySelectorAll('.tracking_result'));\n  resultData.forEach((item, index) => {\n    trackingResultFields[index].innerHTML = `<h2>${topLevelStrings.resultString}:</h2>\n  <div class=\"tracking_result__wrapper\">\n    <div class=\"tracking-result__caption\">${UIStrings.routeString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-route\">${item.CitySender}-${\n      item.CityRecipient\n    }</div>\n    <div class=\"tracking-result__caption\">${UIStrings.weightString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-weight\">${item.DocumentWeight}</div>\n    <div class=\"tracking-result__caption\">${UIStrings.placesString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-weight\">${item.SeatsAmount}</div>\n    <div class=\"tracking-result__caption\">${UIStrings.statusString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-status\">${item.Status}</div>\n    <div class=\"tracking-result__caption\">${UIStrings.returnString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-status\">${\n      item.PossibilityCreateReturn ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=\"request_action\" disabled value=\"${UIStrings.requestString}\"/></div>\n    <div class=\"tracking-result__caption\">${UIStrings.redirectString}:</div>\n    <div class=\"tracking-result__text tracking-result__text-status\">${\n      item.PossibilityCreateRedirecting ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=\"request_action\" disabled value=\"${UIStrings.requestString}\"/></div>\n  </div>`;\n  });\n}\n\nwindow.getTrackingData = getTrackingData;\nwindow.addRequestSet = addRequestSet;\nwindow.removeRequestSet = removeRequestSet;\n\nfunction renderMain() {\n  DOMFrameBlocks[1].innerHTML = `\n    <div class=\"tracking_form\">\n      <form name=\"request_form\" autocomplete=\"off\" onsubmit=\"getTrackingData(event)\">\n        ${renderRequestSet()}\n        <input type=\"submit\" value=\"${UIStrings.buttonString}\" class=\"request_submit\" />\n      </form>\n    </div>`;\n}\n\nfunction renderStaticBlocks() {\n  renderHeader();\n  renderFooter();\n}\n\nfunction renderDynamicBlocks() {\n  renderMain();\n}\n\nfunction renderRequestSet() {\n  return `<div class=\"request_set\">\n            <div class=\"request_item\">\n              <input type=\"text\" name=\"invoice_number\" value=\"\" placeholder=\"\" required/>\n              <label for=\"invoice_number\">${UIStrings.invoiceString}</label>\n            </div>\n            <div class=\"request_item\">\n              <input type=\"text\" name=\"phone_number\" value=\"\" pattern=\"[0-9]{0,10}\" placeholder=\"\"/>\n              <label for=\"phone_number\">${UIStrings.phoneString}</label>\n            </div>\n            <input type=\"button\" class=\"request_add_set\" onclick=\"addRequestSet(event)\" value=\"+\"/>\n            <input type=\"button\" class=\"request_remove_set\" onclick=\"removeRequestSet(event)\" value=\"-\"/>\n             <div class=\"tracking_result\"></div>\n          </div>`;\n}\n\nfunction addRequestSet(event) {\n  event.target.parentNode.insertAdjacentHTML('afterend', `${renderRequestSet()}`);\n}\n\nfunction removeRequestSet() {\n  event.target.parentNode.remove();\n}\n\nlet topLevelFrameString = topLevelFrameBlocks.reduce(\n  (renderString, item) => (renderString += renderSemanticBlock(item)),\n  '',\n);\n\nfunction renderApp() {\n  document.body.insertAdjacentHTML('afterbegin', topLevelFrameString);\n  topLevelFrameBlocks.forEach(item => DOMFrameBlocks.push(document.querySelector(`${item}`)));\n  renderStaticBlocks();\n  renderDynamicBlocks();\n}\n\nrenderApp();\n"]}