{"version":3,"sources":["variables.js","index.js"],"names":["topLevelFrameBlocks","UIStrings","invoiceString","phoneString","buttonString","routeString","weightString","placesString","statusString","requestString","yesString","noString","returnString","redirectString","topLevelStrings","headerString","footerString","resultString","url","requestOptions","contentType","mode","cache","redirect","method","dataType","DOMFrameBlocks","renderSemanticBlock","block","renderHeader","innerHTML","renderFooter","length","getTrackingData","event","preventDefault","requests","Array","from","document","querySelectorAll","styles","request_set","requestDocuments","forEach","prepareDocument","requestItem","push","DocumentNumber","querySelector","value","Phone","requestTemplate","modelName","calledMethod","methodProperties","Language","Documents","body","JSON","stringify","fetch","then","response","json","result","renderResult","data","resultData","trackingResultFields","tracking_result","item","index","tracking_result__wrapper","tracking_result__caption","tracking_result__text","CitySender","CityRecipient","DocumentWeight","SeatsAmount","Status","PossibilityCreateReturn","request_action","status","PossibilityCreateRedirecting","renderMain","tracking_form","renderRequestSet","request_submit","renderStaticBlocks","renderDynamicBlocks","request_item","request_add_set","request_remove_set","addRequestSet","target","parentNode","insertAdjacentHTML","removeRequestSet","remove","window","topLevelFrameString","reduce","renderString","renderApp"],"mappings":"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","file":"framework_task.1265e72b.js","sourceRoot":"..","sourcesContent":["export const topLevelFrameBlocks = ['header', 'main', 'footer'];\n\nexport const UIStrings = {\n  invoiceString: 'Введите номер квитанции',\n  phoneString: 'Введите номер телефона',\n  buttonString: 'Искать',\n  routeString: 'Маршрут',\n  weightString: 'Вес, кг',\n  placesString: 'Мест',\n  statusString: 'Текущий статус',\n  requestString: 'Заказать',\n  yesString: 'да',\n  noString: 'нет',\n  returnString: 'Можно вернуть',\n  redirectString: 'Можно переслать',\n};\n\nexport const topLevelStrings = {\n  headerString: 'Трекинг посылок Новой почты',\n  footerString: 'Версия 1.1',\n  resultString: 'Результат',\n};\n\n// export const apiKey = '797cc99d2a4af108e6d6770516130d77';\nexport const url = 'https://api.novaposhta.ua/v2.0/json/';\n\nexport const requestOptions = {\n  contentType: 'application/json',\n  mode: 'cors',\n  cache: 'no-cache',\n  redirect: 'follow',\n  method: 'POST',\n  dataType: 'jsonp',\n};\n","import {\n  topLevelFrameBlocks,\n  UIStrings,\n  topLevelStrings,\n  requestOptions,\n  // apiKey,\n  url,\n} from './variables.js';\n\nimport styles from './style';\nconst DOMFrameBlocks = [];\n\nfunction renderSemanticBlock(block) {\n  return `<${block}></${block}>`;\n}\n\nfunction renderHeader() {\n  DOMFrameBlocks[0].innerHTML = `<h1>${topLevelStrings.headerString}</h1>`;\n}\n\nfunction renderFooter() {\n  DOMFrameBlocks[DOMFrameBlocks.length - 1].innerHTML = `${topLevelStrings.footerString}`;\n}\n\nfunction getTrackingData(event) {\n  event.preventDefault();\n  const requests = Array.from(document.querySelectorAll(`.${styles.request_set}`));\n  const requestDocuments = [];\n  requests.forEach(prepareDocument);\n\n  function prepareDocument(requestItem) {\n    requestDocuments.push({\n      DocumentNumber: requestItem.querySelector('input[name = invoice_number]').value,\n      Phone: requestItem.querySelector('input[name = phone_number]').value,\n    });\n  }\n\n  const requestTemplate = {\n    modelName: 'TrackingDocument',\n    calledMethod: 'getStatusDocuments',\n    methodProperties: {\n      Language: 'RU',\n    },\n  };\n  requestTemplate.methodProperties.Documents = requestDocuments;\n  requestOptions.body = JSON.stringify(requestTemplate);\n  fetch(url, requestOptions)\n    .then(response => {\n      return response.json();\n    })\n    .then(result => {\n      renderResult(result.data);\n    });\n}\n\nfunction renderResult(resultData) {\n  const trackingResultFields = Array.from(document.querySelectorAll(`.${styles.tracking_result}`));\n  resultData.forEach((item, index) => {\n    trackingResultFields[index].innerHTML = `<h2>${topLevelStrings.resultString}:</h2>\n  <div class=${styles.tracking_result__wrapper}>\n    <div class=${styles.tracking_result__caption}>${UIStrings.routeString}:</div>\n    <div class=${styles.tracking_result__text}>${item.CitySender}-${item.CityRecipient}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.weightString}:</div>\n    <div class=${styles.tracking_result__text}>${item.DocumentWeight}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.placesString}:</div>\n    <div class=${styles.tracking_result__text}>${item.SeatsAmount}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.statusString}:</div>\n    <div class=${styles.tracking_result__text}>${item.Status}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.returnString}:</div>\n    <div class=${styles.tracking_result__text}>${\n      item.PossibilityCreateReturn ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=${styles.request_action} disabled value=\"${\n      UIStrings.requestString\n    }\"/></div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.redirectString}:</div>\n    <div class=\"${styles.tracking_result__text} ${styles.tracking_result__text - status}\">${\n      item.PossibilityCreateRedirecting ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=${styles.request_action} disabled value=\"${\n      UIStrings.requestString\n    }\"/></div>\n  </div>`;\n  });\n}\n\nwindow.getTrackingData = getTrackingData;\nwindow.addRequestSet = addRequestSet;\nwindow.removeRequestSet = removeRequestSet;\n\nfunction renderMain() {\n  DOMFrameBlocks[1].innerHTML = `\n       <div class=${styles.tracking_form}>\n      <form name=\"request_form\" autocomplete=\"off\" onsubmit=\"getTrackingData(event)\">\n        ${renderRequestSet()}\n        <input type=\"submit\" value=\"${UIStrings.buttonString}\" class=${styles.request_submit} />\n      </form>\n    </div>`;\n}\n\nfunction renderStaticBlocks() {\n  renderHeader();\n  renderFooter();\n}\n\nfunction renderDynamicBlocks() {\n  renderMain();\n}\n\nfunction renderRequestSet() {\n  return `<div class=${styles.request_set}>\n            <div class=${styles.request_item}>\n              <input type=\"text\" name=\"invoice_number\" value=\"\" placeholder=\" \" required/>\n              <label for=\"invoice_number\">${UIStrings.invoiceString}</label>\n            </div>\n            <div class=${styles.request_item}>\n              <input type=\"text\" name=\"phone_number\" value=\"\" pattern=\"[0-9]{0,10}\" placeholder=\" \"/>\n              <label for=\"phone_number\">${UIStrings.phoneString}</label>\n            </div>\n            <input type=\"button\" class=${styles.request_add_set} onclick=\"addRequestSet(event)\" value=\"+\"/>\n            <input type=\"button\" class=${styles.request_remove_set} onclick=\"removeRequestSet(event)\" value=\"-\"/>\n             <div class=${styles.tracking_result}></div>\n          </div>`;\n}\n\nfunction addRequestSet(event) {\n  event.target.parentNode.insertAdjacentHTML('afterend', `${renderRequestSet()}`);\n}\n\nfunction removeRequestSet() {\n  event.target.parentNode.remove();\n}\n\nlet topLevelFrameString = topLevelFrameBlocks.reduce(\n  (renderString, item) => (renderString += renderSemanticBlock(item)),\n  '',\n);\n\nfunction renderApp() {\n  document.body.insertAdjacentHTML('afterbegin', topLevelFrameString);\n  topLevelFrameBlocks.forEach(item => DOMFrameBlocks.push(document.querySelector(`${item}`)));\n  renderStaticBlocks();\n  renderDynamicBlocks();\n}\n\nrenderApp();\n"]}