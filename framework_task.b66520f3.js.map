{"version":3,"sources":["variables.js","index.js"],"names":["topLevelFrameBlocks","UIStrings","invoiceString","phoneString","searchButtonString","clearButtonString","routeString","weightString","placesString","statusString","requestString","yesString","noString","returnString","redirectString","headerString","footerString","resultString","url","requestOptions","mode","cache","redirect","method","DOMFrameBlocks","renderSemanticBlock","block","renderHeader","innerHTML","renderFooter","length","getTrackingData","event","preventDefault","requestSets","Array","from","document","querySelectorAll","styles","request_set","requestDocuments","forEach","prepareDocument","requestItem","push","DocumentNumber","querySelector","value","Phone","requestTemplate","modelName","calledMethod","methodProperties","Language","Documents","body","JSON","stringify","fetch","then","response","json","result","renderResult","data","resultData","trackingResultFields","tracking_result","item","index","tracking_result__wrapper","tracking_result__caption","tracking_result__text","CitySender","CityRecipient","DocumentWeight","SeatsAmount","Status","PossibilityCreateReturn","request_action","status","PossibilityCreateRedirecting","resetApp","requestSet","remove","forms","request_form","reset","renderMain","tracking_form","renderRequestSet","request_submit","renderDynamicBlocks","request_item","request_add_set","request_remove_set","addRequestSet","target","parentNode","insertAdjacentHTML","removeRequestSet","window","topLevelFrameString","reduce","renderString","renderApp"],"mappings":"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","file":"framework_task.b66520f3.js","sourceRoot":"..","sourcesContent":["export const topLevelFrameBlocks = ['header', 'main', 'footer'];\n\nexport const UIStrings = {\n  invoiceString: 'Введите номер квитанции',\n  phoneString: 'Введите номер телефона',\n  searchButtonString: 'Искать',\n  clearButtonString: 'Очистить',\n  routeString: 'Маршрут',\n  weightString: 'Вес, кг',\n  placesString: 'Мест',\n  statusString: 'Текущий статус',\n  requestString: 'Заказать',\n  yesString: 'да',\n  noString: 'нет',\n  returnString: 'Можно вернуть',\n  redirectString: 'Можно переслать',\n  headerString: 'Трекинг посылок Новой почты',\n  footerString: 'Версия 1.2',\n  resultString: 'Результат',\n};\n\n// export const apiKey = '797cc99d2a4af108e6d6770516130d77';\nexport const url = 'https://api.novaposhta.ua/v2.0/json/';\n\nexport const requestOptions = {\n  // contentType: 'application/json',\n  mode: 'cors',\n  cache: 'no-cache',\n  redirect: 'follow',\n  method: 'POST',\n  // dataType: 'jsonp',\n};\n","import {\n  topLevelFrameBlocks,\n  UIStrings,\n  requestOptions,\n  // apiKey,\n  url,\n} from './variables.js';\n\nimport styles from './style';\nconst DOMFrameBlocks = [];\n\nfunction renderSemanticBlock(block) {\n  return `<${block}></${block}>`;\n}\n\nfunction renderHeader() {\n  DOMFrameBlocks[0].innerHTML = `<h1>${UIStrings.headerString}</h1>`;\n}\n\nfunction renderFooter() {\n  DOMFrameBlocks[DOMFrameBlocks.length - 1].innerHTML = `${UIStrings.footerString}`;\n}\n\nfunction getTrackingData(event) {\n  event.preventDefault();\n  const requestSets = Array.from(document.querySelectorAll(`.${styles.request_set}`));\n  const requestDocuments = [];\n  requestSets.forEach(prepareDocument);\n\n  function prepareDocument(requestItem) {\n    requestDocuments.push({\n      DocumentNumber: requestItem.querySelector('input[name = invoice_number]').value,\n      Phone: requestItem.querySelector('input[name = phone_number]').value,\n    });\n  }\n\n  const requestTemplate = {\n    modelName: 'TrackingDocument',\n    calledMethod: 'getStatusDocuments',\n    methodProperties: {\n      Language: 'RU',\n    },\n  };\n  requestTemplate.methodProperties.Documents = requestDocuments;\n  requestOptions.body = JSON.stringify(requestTemplate);\n  fetch(url, requestOptions)\n    .then(response => {\n      return response.json();\n    })\n    .then(result => {\n      renderResult(result.data);\n    });\n}\n\nfunction renderResult(resultData) {\n  const trackingResultFields = Array.from(document.querySelectorAll(`.${styles.tracking_result}`));\n  resultData.forEach((item, index) => {\n    trackingResultFields[index].innerHTML = `<h2>${UIStrings.resultString}:</h2>\n  <div class=${styles.tracking_result__wrapper}>\n    <div class=${styles.tracking_result__caption}>${UIStrings.routeString}:</div>\n    <div class=${styles.tracking_result__text}>${item.CitySender}-${item.CityRecipient}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.weightString}:</div>\n    <div class=${styles.tracking_result__text}>${item.DocumentWeight}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.placesString}:</div>\n    <div class=${styles.tracking_result__text}>${item.SeatsAmount}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.statusString}:</div>\n    <div class=${styles.tracking_result__text}>${item.Status}</div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.returnString}:</div>\n    <div class=${styles.tracking_result__text}>${\n      item.PossibilityCreateReturn ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=${styles.request_action} disabled value=\"${\n      UIStrings.requestString\n    }\"/></div>\n    <div class=${styles.tracking_result__caption}>${UIStrings.redirectString}:</div>\n    <div class=\"${styles.tracking_result__text} ${styles.tracking_result__text - status}\">${\n      item.PossibilityCreateRedirecting ? UIStrings.yesString : UIStrings.noString\n    }<input type=\"button\" class=${styles.request_action} disabled value=\"${\n      UIStrings.requestString\n    }\"/></div>\n  </div>`;\n  });\n}\n\nwindow.getTrackingData = getTrackingData;\nwindow.addRequestSet = addRequestSet;\nwindow.removeRequestSet = removeRequestSet;\nwindow.resetApp = resetApp;\n\nfunction resetApp() {\n  const requestSets = Array.from(document.querySelectorAll(`.${styles.request_set}`));\n  requestSets.forEach((requestSet, index) => {\n    if (index > 0) {\n      requestSet.remove();\n    }\n  });\n  if (document.querySelector(`.${styles.tracking_result}`)) {\n    document.querySelector(`.${styles.tracking_result}`).innerHTML = '';\n  }\n  document.forms.request_form.reset();\n}\n\nfunction renderMain() {\n  DOMFrameBlocks[1].innerHTML = `\n       <div class=${styles.tracking_form}>\n      <form name=\"request_form\" autocomplete=\"off\" onsubmit=\"getTrackingData(event)\">\n        ${renderRequestSet()}\n        <input type=\"submit\" value=\"${UIStrings.searchButtonString}\" class=${\n    styles.request_submit\n  } />\n        <input type=\"button\" value=\"${UIStrings.clearButtonString}\" class=${\n    styles.request_submit\n  } onclick=\"resetApp()\" />\n      </form>\n    </div>`;\n}\n\n// function renderStaticBlocks() {\n// }\n\nfunction renderDynamicBlocks() {\n  renderHeader();\n  renderFooter();\n  renderMain();\n}\n\nfunction renderRequestSet() {\n  return `<div class=${styles.request_set}>\n            <div class=${styles.request_item}>\n              <input type=\"text\" name=\"invoice_number\" value=\"\" placeholder=\" \" required/>\n              <label for=\"invoice_number\">${UIStrings.invoiceString}</label>\n            </div>\n            <div class=${styles.request_item}>\n              <input type=\"text\" name=\"phone_number\" value=\"\" pattern=\"[0-9]{0,10}\" placeholder=\" \"/>\n              <label for=\"phone_number\">${UIStrings.phoneString}</label>\n            </div>\n            <input type=\"button\" class=${styles.request_add_set} onclick=\"addRequestSet(event)\" value=\"+\"/>\n            <input type=\"button\" class=${styles.request_remove_set} onclick=\"removeRequestSet(event)\" value=\"-\"/>\n            <div class=${styles.tracking_result}></div>\n          </div>`;\n}\n\nfunction addRequestSet(event) {\n  event.target.parentNode.insertAdjacentHTML('afterend', `${renderRequestSet()}`);\n}\n\nfunction removeRequestSet() {\n  event.target.parentNode.remove();\n}\n\nlet topLevelFrameString = topLevelFrameBlocks.reduce(\n  (renderString, item) => (renderString += renderSemanticBlock(item)),\n  '',\n);\n\nfunction renderApp() {\n  document.body.insertAdjacentHTML('afterbegin', topLevelFrameString);\n  topLevelFrameBlocks.forEach(item => DOMFrameBlocks.push(document.querySelector(`${item}`)));\n  // renderStaticBlocks();\n  renderDynamicBlocks();\n}\n\nrenderApp();\n"]}